import{h as I}from"./index-CKbi4bwp.js";import{u as M}from"./useMessage-BT2EO-y4.js";import{d as N,r as i,c as b,o as F,F as S,e as l,w as t,f as n,j as P,b as r,a as D}from"./index-DYq1HCHD.js";import{u as Y}from"./useForm-CSlvpuIs.js";const j=p=>I.post({url:"/system/accountExist",params:{account:p}},{errorMessageMode:"none"}),A=N({__name:"api",setup(p){const c=[{field:"field1",component:"Input",label:"字段1",colProps:{span:8},required:!0},{field:"field2",component:"Input",label:"字段2",colProps:{span:8},required:!0},{field:"id",label:"id",required:!0,defaultValue:0,component:"InputNumber",show:!1},{field:"field3",component:"DatePicker",label:"字段3",colProps:{span:8},required:!0},{field:"field4",component:"DatePicker",label:"字段4",colProps:{span:8},componentProps:{valueFormat:"YYYY-MM-DD"},rules:[{required:!0,type:"string"}]},{field:"field5",component:"Select",label:"字段5",colProps:{span:8},componentProps:{options:[{label:"选项1",value:"1",key:"1"},{label:"选项2",value:"2",key:"2"}]},rules:[{required:!0,message:"请选择",type:"string"}]},{field:"field6",component:"Input",label:"自定义校验",colProps:{span:8},rules:[{required:!0,validator:async(s,e)=>e?e==="1"?Promise.reject("值不能为1"):Promise.resolve():Promise.reject("值不能为空"),trigger:"change"}]},{field:"field7",component:"CheckboxGroup",label:"字段7",colProps:{span:8},defaultValue:[],componentProps:{options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"}]},rules:[{required:!0}]},{field:"field8",component:"RadioGroup",label:"字段8",colProps:{span:8},componentProps:{options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"}]},rules:[{required:!0,message:"覆盖默认生成的校验信息"}]},{field:"field9",component:"Input",label:"后端异步验证",colProps:{span:8},helpMessage:["本字段演示异步验证","本地规则：必须填写","后端规则：不能包含admin"],rules:[{required:!0,message:"请输入数据"},{validator(s,e){return new Promise((a,u)=>{j(e).then(()=>a()).catch(d=>{u(d.message||"验证失败")})})}}]}],{createMessage:f}=M(),[g,{validateFields:o,clearValidate:m,getFieldsValue:_,resetFields:v,setFieldsValue:V}]=Y({labelWidth:120,schemas:c,actionColOptions:{span:24}});async function k(){try{const s=await o();console.log("passing",s)}catch(s){console.log("not passing",s)}}async function y(){m()}function C(){const s=_();f.success("values:"+JSON.stringify(s)),console.log(s)}function q(){V({field1:1111,field5:"1",field7:["1"],field33:"2020-12-12",field3:"2020-12-12"})}function w(s){console.log(s)}return(s,e)=>{const a=i("el-button"),u=i("el-col"),d=i("el-row"),x=i("PdForm");return F(),b(S,null,[l(d,null,{default:t(()=>[l(u,{span:24},{default:t(()=>[l(a,{onClick:k,class:"mr-2"},{default:t(()=>[...e[0]||(e[0]=[n(" 手动校验表单 ",-1)])]),_:1}),l(a,{onClick:y,class:"mr-2"},{default:t(()=>[...e[1]||(e[1]=[n(" 清空校验信息 ",-1)])]),_:1}),l(a,{onClick:C,class:"mr-2"},{default:t(()=>[...e[2]||(e[2]=[n(" 获取表单值 ",-1)])]),_:1}),l(a,{onClick:q,class:"mr-2"},{default:t(()=>[...e[3]||(e[3]=[n(" 设置表单值 ",-1)])]),_:1}),l(a,{onClick:P(v),class:"mr-2"},{default:t(()=>[...e[4]||(e[4]=[n(" 重置 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1}),l(d,null,{default:t(()=>[l(u,{span:24},{default:t(()=>[l(x,{onRegister:P(g),onSubmit:w},null,8,["onRegister"])]),_:1})]),_:1})],64)}}}),B={class:"markdown-body"},T={__name:"api",setup(p,{expose:c}){return c({frontmatter:{}}),(g,o)=>{const m=i("Preview");return F(),b("div",B,[o[0]||(o[0]=r("h2",null,"表单实例 API（useForm）",-1)),o[1]||(o[1]=r("p",null,[n("PdForm 会在 mounted 时通过 "),r("code",null,"register"),n(" 事件回传表单实例（"),r("code",null,"IFormActionType"),n("）。推荐使用 "),r("code",null,"useForm()"),n(" 统一管理实例并获得类型提示。")],-1)),o[2]||(o[2]=r("pre",null,[r("code",{class:"language-ts"},`import { useForm } from '@pandora/components/PdForm'

const [register, methods] = useForm({
  labelWidth: 120,
  schemas: []
})
`)],-1)),o[3]||(o[3]=r("h2",null,"示例：调用实例方法",-1)),l(m,{"comp-name":"PdForm","demo-name":"api"},{default:t(()=>[l(A)]),_:1}),o[4]||(o[4]=D("<p>示例中演示了这些能力：</p><ul><li><code>validateFields()</code>：手动校验表单</li><li><code>clearValidate()</code>：清空校验信息</li><li><code>getFieldsValue()</code>：获取表单值</li><li><code>setFieldsValue()</code>：设置表单值</li><li><code>resetFields()</code>：重置表单</li></ul>",2))])}}};export{T as default};
