import{h as O,i as C,j as d,k as D,n as P,d as f,l as y,c as m,o as g,e as n,m as _,g as b,r as k,b as t,w as p,f as u,a as I}from"./index-B0SowJ8y.js";function w(c){const o=C(null),r=C(!1);async function s(){return d(o)||console.error("The chart instance has not been obtained, please make sure that the chart has been rendered when performing the chart operation!"),await P(),d(o)}return[a=>{O(()=>{o.value=null,r.value=!1}),!(d(r)&&a===d(o))&&(o.value=a,r.value=!0,D(()=>c,()=>{c&&a.setProps(c)},{immediate:!0,deep:!0}))},{setProps:async a=>{(await s()).setProps(a)},setOptions:async a=>{(await s()).setOptions(a)},resize:async()=>{(await s()).resize()},getInstance:()=>d(o)?.getInstance(),showLoading:async(a,h)=>{(await s()).showLoading(a,h)},hideLoading:async()=>{(await s()).hideLoading()},clear:async()=>{(await s()).clear()},dispose:async()=>{(await s()).dispose()}}]}const L={class:"demo-charts"},x=f({__name:"pie01",setup(c){const[o,{setProps:r}]=w({chartType:"pie",subChartType:"pie01",theme:"ovilia-green"}),s=[{name:"A类",value:"3720"},{name:"B类",value:"2920"},{name:"C类",value:"2200"},{name:"D类",value:"1420"},{name:"E类",value:"3200"},{name:"F类",value:"2420"},{name:"G类",value:"2200"},{name:"H类",value:"1420"},{name:"I类",value:"3200"},{name:"J类",value:"2420"}];return y(()=>{r({data:s})}),(e,i)=>(g(),m("div",L,[n(d(_),{onRegister:d(o)},null,8,["onRegister"])]))}}),B=b(x,[["__scopeId","data-v-d7cea798"]]),z={class:"demo-charts"},M=f({__name:"pie02",setup(c){const[o,{setProps:r}]=w({chartType:"pie",subChartType:"pie02"}),s=[{value:"2879",name:"北京TBD"},{value:"806",name:"上海TBD"},{value:"723",name:"天津TBD"},{value:"546",name:"宁夏TBD"},{value:"454",name:"青岛TBD"},{value:"344",name:"沈阳TBD"},{value:"244",name:"新疆TBD"}];return y(()=>{r({data:s})}),(e,i)=>(g(),m("div",z,[n(d(_),{onRegister:d(o)},null,8,["onRegister"])]))}}),A=b(M,[["__scopeId","data-v-5338ee43"]]),R={class:"demo-card"},V={class:"operation-bar"},U={class:"chart-container"},$=f({__name:"useCharts",setup(c){const[o,{setOptions:r,showLoading:s,hideLoading:e,resize:i}]=w(),a=C(!1),h={tooltip:{trigger:"item"},legend:{top:"5%",left:"center"},series:[{name:"Access From",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"40",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:1048,name:"Search Engine"},{value:735,name:"Direct"},{value:580,name:"Email"},{value:484,name:"Union Ads"},{value:300,name:"Video Ads"}]}]};y(()=>{P(()=>{r(h)})});function T(){const E=[{value:Math.floor(Math.random()*1e3),name:"Search Engine"},{value:Math.floor(Math.random()*1e3),name:"Direct"},{value:Math.floor(Math.random()*1e3),name:"Email"},{value:Math.floor(Math.random()*1e3),name:"Union Ads"},{value:Math.floor(Math.random()*1e3),name:"Video Ads"}];r({series:[{data:E}]})}function q(){a.value=!a.value,a.value?s():e()}return(E,l)=>{const v=k("el-button");return g(),m("div",R,[t("div",V,[n(v,{type:"primary",onClick:T},{default:p(()=>[...l[0]||(l[0]=[u("更新数据",-1)])]),_:1}),n(v,{onClick:q},{default:p(()=>[...l[1]||(l[1]=[u("切换 Loading",-1)])]),_:1}),n(v,{onClick:d(i)},{default:p(()=>[...l[2]||(l[2]=[u("重置大小",-1)])]),_:1},8,["onClick"])]),t("div",U,[n(d(_),{onRegister:d(o)},null,8,["onRegister"])])])}}}),S=b($,[["__scopeId","data-v-dba11afd"]]),j={class:"markdown-body"},H={__name:"README",setup(c,{expose:o}){return o({frontmatter:{}}),(s,e)=>{const i=k("Preview");return g(),m("div",j,[e[0]||(e[0]=I(`<h1>PdCharts</h1><p>Pandora2 的图表组件，基于 ECharts 封装，核心目标：</p><ul><li>提供一个统一的 <code>&lt;Charts&gt;</code> 组件，约定 <code>data + chartType + subChartType</code> 即可渲染常见图表</li><li>通过 <code>useCharts()</code> 暴露 ECharts 实例的常用控制能力（setOptions / resize / loading / clear / dispose 等）</li></ul><h2>快速开始</h2><h3>组件使用</h3><pre><code class="language-vue">&lt;template&gt;
  &lt;div style=&quot;height: 400px&quot;&gt;
    &lt;Charts :data=&quot;data&quot; chartType=&quot;pie&quot; subChartType=&quot;ring&quot; /&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { Charts } from &#39;@pandora/components/PdCharts&#39;

const data = [
  { name: &#39;Search Engine&#39;, value: 1048 },
  { name: &#39;Direct&#39;, value: 735 }
]
&lt;/script&gt;
</code></pre><h3>useCharts Hook</h3><pre><code class="language-ts">import { Charts, useCharts } from &#39;@pandora/components/PdCharts&#39;

const [register, { setOptions, resize, showLoading, hideLoading }] = useCharts()
</code></pre><h2>Charts 组件属性（部分）</h2><p>完整类型：<code>ChartsProps</code>（见 [types/index.ts](file:///Users/xiaofanren/ylf/github/Pandora2/packages/components/PdCharts/src/types/index.ts)）</p><table><thead><tr><th>属性名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>data</td><td><code>any[]</code></td><td>原始数据，内部会根据 <code>chartType/subChartType</code> 转成 option</td></tr><tr><td>options</td><td><code>ChartsOption</code></td><td>直接传入 ECharts option（<code>manualUpdate=true</code> 时可手动 setOptions）</td></tr><tr><td>chartType</td><td><code>string</code></td><td>业务图表类型（如 <code>&#39;pie&#39;</code>、未来可扩展 line/bar 等）</td></tr><tr><td>subChartType</td><td><code>string</code></td><td>子类型（如 <code>&#39;ring&#39;</code>、<code>&#39;pie01&#39;</code> 等，交由 transform 层解析）</td></tr><tr><td>theme</td><td><code>Theme</code></td><td>ECharts 主题</td></tr><tr><td>manualUpdate</td><td><code>boolean</code></td><td>是否手动更新 options（配合 <code>setOptions</code> 使用）</td></tr><tr><td>autoresize</td><td><code>AutoresizeProp</code></td><td>是否根据容器自动 resize（支持节流配置）</td></tr><tr><td>loading</td><td><code>boolean</code></td><td>是否显示 loading</td></tr><tr><td>loadingOptions</td><td><code>LoadingOptions</code></td><td>loading 配置（颜色、文案、大小等）</td></tr><tr><td>initOptions</td><td><code>InitOptions</code></td><td>ECharts 初始化参数</td></tr><tr><td>updateOptions</td><td><code>UpdateOptions</code></td><td>调用 <code>setOption</code> 时的更新参数</td></tr><tr><td>group</td><td><code>string</code></td><td>图表 group，同组图表可进行联动</td></tr></tbody></table><h2>useCharts 返回值</h2><p><code>useCharts(props?)</code> 返回 <code>[register, methods]</code>：</p><ul><li><code>register(instance)</code>：绑定到 <code>&lt;Charts @register=&quot;register&quot; /&gt;</code></li><li><code>methods</code>：图表实例方法（<code>ChartsActionType</code>）</li></ul><p>常用方法：</p><ul><li><code>setProps(props)</code>：动态修改 Charts 组件 props，如 <code>setProps({ loading: true })</code></li><li><code>setOptions(options)</code>：调用 ECharts <code>setOption</code>（内部处理 manualUpdate/init 逻辑）</li><li><code>resize()</code>：手动触发重绘</li><li><code>getInstance()</code>：获取原始 ECharts 实例（方便访问 addGraphic 等高级能力）</li><li><code>showLoading(type?, opts?)</code> / <code>hideLoading()</code></li><li><code>clear()</code>：清空图表</li><li><code>dispose()</code>：销毁实例</li></ul><h2>事件绑定（ECharts Events）</h2><p>Charts 支持把 ECharts 事件以 Vue 事件形式直接监听（例如 <code>@click</code>、<code>@legendselectchanged</code>、<code>@zr:click</code> 等），事件名与 ECharts 保持一致；另有一个组件事件：</p><ul><li><code>register</code>：回传 <code>ChartsActionType</code>（给 useCharts 使用）</li></ul><pre><code class="language-vue">&lt;Charts
  :data=&quot;data&quot;
  chartType=&quot;pie&quot;
  @click=&quot;(params) =&gt; console.log(&#39;click&#39;, params)&quot;
  @legendselectchanged=&quot;() =&gt; console.log(&#39;legend changed&#39;)&quot;
/&gt;
</code></pre><h2>目录</h2>`,21)),e[1]||(e[1]=t("div",{class:"chart-category"},[t("div",{class:"category-title"},"基础API示例"),t("div",{class:"chart-nav"},[t("a",{class:"nav-item",href:"javascript:void(0)",onclick:"document.getElementById('useCharts').scrollIntoView({behavior: 'smooth'})"},[t("span",null,"useCharts")])])],-1)),e[2]||(e[2]=t("div",{class:"chart-category"},[t("div",{class:"category-title"},"饼图 Pie"),t("div",{class:"chart-nav"},[t("a",{class:"nav-item",href:"javascript:void(0)",onclick:"document.getElementById('pie01').scrollIntoView({behavior: 'smooth'})"},[t("span",null,"基础饼图")]),t("a",{class:"nav-item",href:"javascript:void(0)",onclick:"document.getElementById('pie02').scrollIntoView({behavior: 'smooth'})"},[t("span",null,"饼图示例 2")])])],-1)),e[3]||(e[3]=t("p",null,[t("span",{id:"useCharts"})],-1)),e[4]||(e[4]=t("h2",null,"useCharts Hook 示例",-1)),e[5]||(e[5]=t("p",null,[u("通过 "),t("code",null,"useCharts"),u(" 可以更灵活地控制 ECharts 配置、loading、resize 等。")],-1)),n(i,{"comp-name":"PdCharts","demo-name":"hook/useCharts"},{default:p(()=>[n(S)]),_:1}),e[6]||(e[6]=t("p",null,[t("span",{id:"pie01"})],-1)),e[7]||(e[7]=t("h2",null,"基础饼图",-1)),n(i,{"comp-name":"PdCharts","demo-name":"pie/pie01"},{default:p(()=>[n(B)]),_:1}),e[8]||(e[8]=t("p",null,[t("span",{id:"pie02"})],-1)),e[9]||(e[9]=t("h2",null,"饼图示例 2",-1)),n(i,{"comp-name":"PdCharts","demo-name":"pie/pie02"},{default:p(()=>[n(A)]),_:1})])}}};export{H as default};
