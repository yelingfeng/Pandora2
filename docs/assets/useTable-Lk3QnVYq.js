import{d as I,J as P,A as c,g as x,r as k,c as $,o as h,a as g,e as o,w as r,f as l,t as A,F as M}from"./index-C_htmB-k.js";import{u as R}from"./useTable-DB4jhs76.js";import"./env-B8mCLz8K.js";const V=I({setup(){const t=[{id:"3",username:"王五",role:"guest"},{id:"1",username:"张三",role:"admin"},{id:"2",username:"李四",role:"user"}],e=[...t],d=P("无"),f=[{type:"selection",width:50},{value:"id",name:"ID",width:80,sortable:!0},{value:"username",name:"姓名",width:120,sortable:!0},{value:"role",name:"角色"}],i=(n,u)=>{const a=u==="ascending"?1:-1;return(p,B)=>{const S=p?.[n],D=B?.[n],N=Number(S),T=Number(D);return!Number.isNaN(N)&&!Number.isNaN(T)?(N-T)*a:String(S??"").localeCompare(String(D??""),"zh-CN")*a}},m=(n,u)=>{const a=[...e||[]].sort(i(n,u));b(a),d.value=`${n} ${u}`},s=()=>{b([...e]),d.value="无",c.success("已重置排序")},[C,{setProps:v,setColumns:w,setData:b,getSelectRows:_,clearSelection:y}]=R({data:t,columns:f,sortConfig:{sortMode:"single",defaultOrder:"ascending",defaultSorts:[{prop:"id",order:"ascending"}],sortChange:n=>{const u=Object.entries(n||{});if(!u.length){s();return}const[a,p]=u[0];if(!a||!p){s();return}m(a,p),c.success(`触发排序：${a} ${p}（点击表头排序图标可测试）`)}},tableConfig:{stripe:!1,border:!0,selection:{selectionMode:"multi"}}});return{register:C,changeStripe:()=>{v({tableConfig:{stripe:!0}}),c.success("已开启斑马纹")},changeBorder:()=>{v({tableConfig:{border:!1}}),c.success("已关闭边框")},getSelection:()=>{const n=_();c.info(`选中 ${n.length} 行`),console.log(n)},clearSelect:()=>{y()},changeData:()=>{const n=[{id:"101",username:"赵六",role:"tester"},{id:"102",username:"孙七",role:"dev"}];e.splice(0,e.length,...n),b([...e]),d.value="无",c.success("数据已更新")},changeColumns:()=>{w([{value:"username",name:"用户名称",width:150,sortable:!0},{value:"role",name:"用户角色"}]),c.success("列已更新")},sortIdAsc:()=>m("id","ascending"),sortIdDesc:()=>m("id","descending"),resetSort:s,sortText:d}}}),E={style:{"margin-bottom":"10px"}},F={style:{"margin-bottom":"10px"}},O={style:{"margin-left":"12px"}},j={style:{height:"500px"}};function z(t,e,d,f,i,m){const s=k("el-button"),C=k("PdTable");return h(),$(M,null,[g("div",E,[o(s,{onClick:t.changeStripe},{default:r(()=>[...e[0]||(e[0]=[l("切换斑马纹",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.changeBorder},{default:r(()=>[...e[1]||(e[1]=[l("切换边框",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.getSelection},{default:r(()=>[...e[2]||(e[2]=[l("获取选中行",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.clearSelect},{default:r(()=>[...e[3]||(e[3]=[l("清空选择",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.changeData},{default:r(()=>[...e[4]||(e[4]=[l("切换数据",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.changeColumns},{default:r(()=>[...e[5]||(e[5]=[l("切换列",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.resetSort},{default:r(()=>[...e[6]||(e[6]=[l("重置排序",-1)])]),_:1},8,["onClick"])]),g("div",F,[o(s,{onClick:t.sortIdAsc},{default:r(()=>[...e[7]||(e[7]=[l("按 ID 升序（本地排序）",-1)])]),_:1},8,["onClick"]),o(s,{onClick:t.sortIdDesc},{default:r(()=>[...e[8]||(e[8]=[l("按 ID 降序（本地排序）",-1)])]),_:1},8,["onClick"]),g("span",O,"当前排序："+A(t.sortText),1)]),g("div",j,[o(C,{onRegister:t.register},null,8,["onRegister"])])],64)}const J=x(V,[["render",z]]),q={class:"markdown-body"},Z={__name:"useTable",setup(t,{expose:e}){return e({frontmatter:{}}),(f,i)=>{const m=k("Preview");return h(),$("div",q,[i[0]||(i[0]=g("h1",null,"useTable",-1)),i[1]||(i[1]=g("p",null,"使用 useTable hook 操作表格。",-1)),o(m,{"comp-name":"PdTable","demo-name":"useTable"},{default:r(()=>[o(J)]),_:1})])}}};export{Z as default};
