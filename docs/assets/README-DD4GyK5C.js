import{d as f,r as i,p as y,o as r,i as x,q as u,c as m,b as a,e as s,a as p,w as h}from"./index-D2W91eA5.js";import{u as b}from"./useForm-CIdH_nU_.js";const F=f({__name:"demo",setup(c){const l=u({name:"",region:"",city:"",type:""}),d=[{field:"name",component:"Input",label:"名称",defaultValue:"",componentProps:{placeholder:"自定义placeholder"}},{field:"region",component:"Input",label:"活动区域",defaultValue:""},{field:"city",component:"Select",label:"活动城市",defaultValue:"",componentProps:{placeholder:"请选择城市",clearable:!0,options:[{label:"北京",value:"beijing"},{label:"上海",value:"shanghai"},{label:"沈阳",value:"shenyang"},{label:"广州",value:"guangzhou"}]}},{field:"type",component:"CheckboxGroup",label:"活动形式",defaultValue:[],componentProps:{options:[{label:"选项1",value:"1"},{label:"选项2",value:"2"},{label:"选项3",value:"3"},{label:"选项4",value:"4"}]}}],o=[];for(let e=14;e<30;e++)o.push({field:"field"+e,component:"Input",label:"字段"+e,colProps:{span:8}});const[t]=b({schemas:[...d,...o],baseColProps:{span:12},autoSetPlaceHolder:!1,actionColOptions:{span:24},model:l,inline:!1,labelPosition:"right",labelWidth:"120px",showAdvancedButton:!0,showActionButtonGroup:!0,alwaysShowLines:3}),n=e=>{console.log(e)};return(e,v)=>{const g=i("PdForm");return r(),y(g,{onRegister:x(t),schemas:d,onSubmit:n},null,8,["onRegister"])}}}),P={class:"markdown-body"},B={__name:"README",setup(c,{expose:l}){return l({frontmatter:{}}),(o,t)=>{const n=i("Preview");return r(),m("div",P,[t[0]||(t[0]=a("h1",null,"PdForm",-1)),t[1]||(t[1]=a("p",null,"Pandora2 的form组件",-1)),t[2]||(t[2]=a("h2",null,"基础使用",-1)),s(n,{"comp-name":"PdForm","demo-name":"demo"},{default:h(()=>[s(F)]),_:1}),t[3]||(t[3]=p(`<h2>快速开始</h2><p>PdForm 通过 <code>schemas</code> 描述表单项，通过 <code>useForm()</code> 获取表单实例方法（校验、取值、动态改 schema 等），适合“配置化表单 / 动态表单”场景。</p><pre><code class="language-vue">&lt;template&gt;
  &lt;PdForm :schemas=&quot;schemas&quot; @register=&quot;register&quot; @submit=&quot;onSubmit&quot; /&gt;
&lt;/template&gt;

&lt;script setup lang=&quot;ts&quot;&gt;
import { PdForm, useForm, type IFormSchema } from &#39;@pandora/components/PdForm&#39;

const schemas: IFormSchema[] = [
  { field: &#39;name&#39;, component: &#39;Input&#39;, label: &#39;名称&#39;, required: true, colProps: { span: 8 } },
  { field: &#39;date&#39;, component: &#39;DatePicker&#39;, label: &#39;日期&#39;, colProps: { span: 8 } }
]

const [register] = useForm({ schemas, labelWidth: 120 })

function onSubmit(values: Record&lt;string, any&gt;) {
  console.log(values)
}
&lt;/script&gt;
</code></pre><h2>useForm / 表单实例</h2><p><code>useForm()</code> 返回 <code>[register, methods]</code>：</p><ul><li><code>register</code>：绑定到 <code>&lt;PdForm @register=&quot;register&quot; /&gt;</code>，用于拿到实例</li><li><code>methods</code>：表单实例方法（可用于按钮事件、接口联动、动态增减表单项）</li></ul><p>常用方法（完整类型以 <code>IFormActionType</code> 为准）：</p><ul><li><code>submit()</code>：触发表单提交（内部会校验并触发 <code>submit</code> 事件）</li><li><code>validate(cb?)</code> / <code>validateFields(fields?)</code> / <code>clearValidate(name?)</code></li><li><code>getFieldsValue()</code> / <code>setFieldsValue(values)</code></li><li><code>setProps(formProps)</code>：动态设置表单 props（包含 Element Plus Form 原生 props）</li><li><code>updateSchema(partial)</code> / <code>resetSchema(partial)</code>：动态更新 schema</li><li><code>removeSchemaByFiled(field)</code> / <code>appendSchemaByField(schema, prefixField?, first?)</code></li><li><code>scrollToField(name, options?)</code></li></ul><h2>事件</h2><table><thead><tr><th>事件名</th><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>register</td><td>(instance: IFormActionType)</td><td>表单实例注册（配合 useForm）</td></tr><tr><td>submit</td><td>(values: Recordable)</td><td>点击提交或调用 <code>submit()</code> 后触发</td></tr><tr><td>reset</td><td>()</td><td>点击重置或调用 <code>resetFields()</code> 后触发</td></tr><tr><td>advanced-change</td><td>(isAdvanced: boolean)</td><td>展开/收起状态变化</td></tr><tr><td>field-value-change</td><td>(data: { key: string; value: any; values: Recordable })</td><td>任意字段值变化（受 <code>submitOnChange</code>/watch 逻辑影响）</td></tr></tbody></table><h2>属性</h2><p>PdForm 的属性由两部分构成：</p><ul><li><strong>组件扩展属性</strong>：下表列出（schemas、折叠、按钮组等）</li><li><strong>Element Plus Form 原生属性</strong>：可直接作为 <code>&lt;PdForm ... /&gt;</code> 传入，也可用 <code>setProps()</code> 动态设置（例如 <code>labelPosition/inline/rules/hideRequiredAsterisk</code> 等）</li></ul><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th><th style="text-align:left;">类型</th><th style="text-align:left;">默认值</th></tr></thead><tbody><tr><td style="text-align:left;">model</td><td style="text-align:left;">表单数据对象</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;"><code>{}</code></td></tr><tr><td style="text-align:left;">labelWidth</td><td style="text-align:left;">标签宽度，固定宽度</td><td style="text-align:left;"><code>Number | String</code></td><td style="text-align:left;"><code>0</code></td></tr><tr><td style="text-align:left;">fieldMapToTime</td><td style="text-align:left;">时间字段映射，用于将时间数组解构为两个字段</td><td style="text-align:left;"><code>Array</code></td><td style="text-align:left;"><code>[]</code></td></tr><tr><td style="text-align:left;">schemas</td><td style="text-align:left;">表单配置规则数组</td><td style="text-align:left;"><code>IFormSchema[]</code></td><td style="text-align:left;"><code>[]</code></td></tr><tr><td style="text-align:left;">mergeDynamicData</td><td style="text-align:left;">合并到动态数据的对象</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;"><code>null</code></td></tr><tr><td style="text-align:left;">baseRowStyle</td><td style="text-align:left;">基础行样式</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">baseColProps</td><td style="text-align:left;">基础列配置 (Element Plus ColProps)</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">autoSetPlaceHolder</td><td style="text-align:left;">是否自动设置占位符</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td></tr><tr><td style="text-align:left;">autoSubmitOnEnter</td><td style="text-align:left;">在Input组件上回车是否自动提交</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">submitOnReset</td><td style="text-align:left;">重置时是否提交</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">submitOnChange</td><td style="text-align:left;">表单值变化时是否自动提交</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">size</td><td style="text-align:left;">表单尺寸</td><td style="text-align:left;"><code>&#39;large&#39; | &#39;default&#39; | &#39;small&#39;</code></td><td style="text-align:left;"><code>&#39;default&#39;</code></td></tr><tr><td style="text-align:left;">disabled</td><td style="text-align:left;">是否禁用表单</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">emptySpan</td><td style="text-align:left;">空白占位格数</td><td style="text-align:left;"><code>Number | Object</code></td><td style="text-align:left;"><code>0</code></td></tr><tr><td style="text-align:left;">showAdvancedButton</td><td style="text-align:left;">是否显示收起/展开按钮</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">transformDateFunc</td><td style="text-align:left;">时间转换函数</td><td style="text-align:left;"><code>Function</code></td><td style="text-align:left;"><code>(date) =&gt; date?.format?.(&#39;YYYY-MM-DD HH:mm:ss&#39;) ?? date</code></td></tr><tr><td style="text-align:left;">rulesMessageJoinLabel</td><td style="text-align:left;">验证消息是否包含标签名</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td></tr><tr><td style="text-align:left;">autoAdvancedLine</td><td style="text-align:left;">超过多少行自动折叠</td><td style="text-align:left;"><code>Number</code></td><td style="text-align:left;"><code>3</code></td></tr><tr><td style="text-align:left;">alwaysShowLines</td><td style="text-align:left;">始终显示的行数（不受折叠影响）</td><td style="text-align:left;"><code>Number</code></td><td style="text-align:left;"><code>1</code></td></tr><tr><td style="text-align:left;">showActionButtonGroup</td><td style="text-align:left;">是否显示操作按钮组</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td></tr><tr><td style="text-align:left;">actionColOptions</td><td style="text-align:left;">操作列布局配置 (Element Plus ColProps)</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">showResetButton</td><td style="text-align:left;">是否显示重置按钮</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td></tr><tr><td style="text-align:left;">autoFocusFirstItem</td><td style="text-align:left;">是否自动聚焦第一个输入框</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">resetButtonOptions</td><td style="text-align:left;">重置按钮配置 (Element Plus ButtonProps)</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">showSubmitButton</td><td style="text-align:left;">是否显示提交按钮</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>true</code></td></tr><tr><td style="text-align:left;">submitButtonOptions</td><td style="text-align:left;">提交按钮配置 (Element Plus ButtonProps)</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">resetFunc</td><td style="text-align:left;">自定义重置函数</td><td style="text-align:left;"><code>() =&gt; Promise&lt;void&gt;</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">submitFunc</td><td style="text-align:left;">自定义提交函数</td><td style="text-align:left;"><code>() =&gt; Promise&lt;void&gt;</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">hideRequiredMark</td><td style="text-align:left;">是否隐藏必填标记</td><td style="text-align:left;"><code>Boolean</code></td><td style="text-align:left;"><code>false</code></td></tr><tr><td style="text-align:left;">labelAlign</td><td style="text-align:left;">标签对齐方式</td><td style="text-align:left;"><code>String</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">rowProps</td><td style="text-align:left;">行组件配置 (Element Plus RowProps)</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr><tr><td style="text-align:left;">rules</td><td style="text-align:left;">表单验证规则</td><td style="text-align:left;"><code>Object</code></td><td style="text-align:left;">-</td></tr></tbody></table><h3>常用 Element Plus Form 原生属性（透传）</h3><table><thead><tr><th>属性</th><th>说明</th><th>类型</th></tr></thead><tbody><tr><td>labelPosition</td><td>label 位置</td><td><code>&#39;left&#39; | &#39;right&#39; | &#39;top&#39;</code></td></tr><tr><td>labelSuffix</td><td>label 后缀</td><td><code>string</code></td></tr><tr><td>inline</td><td>行内表单</td><td><code>boolean</code></td></tr><tr><td>showMessage</td><td>是否显示校验信息</td><td><code>boolean</code></td></tr><tr><td>inlineMessage</td><td>行内显示校验信息</td><td><code>boolean</code></td></tr><tr><td>statusIcon</td><td>输入框状态图标</td><td><code>boolean</code></td></tr><tr><td>validateOnRuleChange</td><td>规则变化时是否触发校验</td><td><code>boolean</code></td></tr><tr><td>hideRequiredAsterisk</td><td>是否隐藏必填星号</td><td><code>boolean</code></td></tr></tbody></table><h2>FormSchema</h2><table><thead><tr><th style="text-align:left;">属性</th><th style="text-align:left;">说明</th><th style="text-align:left;">类型</th></tr></thead><tbody><tr><td style="text-align:left;">field</td><td style="text-align:left;">字段名</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">label</td><td style="text-align:left;">标签名</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">changeEvent</td><td style="text-align:left;">内部值变化触发的事件名，默认为 change</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">component</td><td style="text-align:left;">渲染的组件类型</td><td style="text-align:left;"><code>ComponentType</code></td></tr><tr><td style="text-align:left;">componentProps</td><td style="text-align:left;">组件属性</td><td style="text-align:left;"><code>Object | Function</code></td></tr><tr><td style="text-align:left;">rules</td><td style="text-align:left;">验证规则</td><td style="text-align:left;"><code>FormRules | FormRules[]</code></td></tr><tr><td style="text-align:left;">required</td><td style="text-align:left;">是否必填</td><td style="text-align:left;"><code>boolean | Function</code></td></tr><tr><td style="text-align:left;">suffix</td><td style="text-align:left;">后缀</td><td style="text-align:left;"><code>string | number | Function</code></td></tr><tr><td style="text-align:left;">rulesMessageJoinLabel</td><td style="text-align:left;">验证消息是否包含标签名</td><td style="text-align:left;"><code>boolean</code></td></tr><tr><td style="text-align:left;">itemProps</td><td style="text-align:left;">参考 FormItem 的 props</td><td style="text-align:left;"><code>object</code></td></tr><tr><td style="text-align:left;">colProps</td><td style="text-align:left;">表单项外层的 Col 配置</td><td style="text-align:left;"><code>object</code></td></tr><tr><td style="text-align:left;">labelCol</td><td style="text-align:left;">标签 Col 配置</td><td style="text-align:left;"><code>object</code></td></tr><tr><td style="text-align:left;">wrapperCol</td><td style="text-align:left;">控件 Col 配置</td><td style="text-align:left;"><code>object</code></td></tr><tr><td style="text-align:left;">valueField</td><td style="text-align:left;">绑定到 v-model 的变量名</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">subLabel</td><td style="text-align:left;">子标签</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">helpMessage</td><td style="text-align:left;">帮助信息</td><td style="text-align:left;"><code>string | string[] | Function</code></td></tr><tr><td style="text-align:left;">helpComponentProps</td><td style="text-align:left;">帮助组件属性</td><td style="text-align:left;"><code>object</code></td></tr><tr><td style="text-align:left;">defaultValue</td><td style="text-align:left;">默认值</td><td style="text-align:left;"><code>any</code></td></tr><tr><td style="text-align:left;">ifShow</td><td style="text-align:left;">是否显示 (DOM 层面控制)</td><td style="text-align:left;"><code>boolean | Function</code></td></tr><tr><td style="text-align:left;">show</td><td style="text-align:left;">是否显示 (CSS 层面控制)</td><td style="text-align:left;"><code>boolean | Function</code></td></tr><tr><td style="text-align:left;">render</td><td style="text-align:left;">自定义渲染内容 (在 form-item 内部)</td><td style="text-align:left;"><code>Function</code></td></tr><tr><td style="text-align:left;">renderColContent</td><td style="text-align:left;">自定义渲染 Col 内容 (需要外层包裹 form-item)</td><td style="text-align:left;"><code>Function</code></td></tr><tr><td style="text-align:left;">renderComponentContent</td><td style="text-align:left;">自定义渲染组件内容</td><td style="text-align:left;"><code>Function | VNode | string</code></td></tr><tr><td style="text-align:left;">slot</td><td style="text-align:left;">自定义插槽 (在 form-item 内部)</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">colSlot</td><td style="text-align:left;">自定义 Col 插槽</td><td style="text-align:left;"><code>string</code></td></tr><tr><td style="text-align:left;">dynamicDisabled</td><td style="text-align:left;">动态禁用</td><td style="text-align:left;"><code>boolean | Function</code></td></tr><tr><td style="text-align:left;">dynamicRules</td><td style="text-align:left;">动态验证规则</td><td style="text-align:left;"><code>Function</code></td></tr></tbody></table><h2>ComponentType</h2><table><thead><tr><th style="text-align:left;">组件名</th><th style="text-align:left;">说明</th></tr></thead><tbody><tr><td style="text-align:left;">Autocomplete</td><td style="text-align:left;">自动补全输入框</td></tr><tr><td style="text-align:left;">Button</td><td style="text-align:left;">按钮</td></tr><tr><td style="text-align:left;">Checkbox</td><td style="text-align:left;">多选框</td></tr><tr><td style="text-align:left;">CheckboxGroup</td><td style="text-align:left;">多选框组</td></tr><tr><td style="text-align:left;">Cascader</td><td style="text-align:left;">级联选择器</td></tr><tr><td style="text-align:left;">DatePicker</td><td style="text-align:left;">日期选择器</td></tr><tr><td style="text-align:left;">Input</td><td style="text-align:left;">输入框</td></tr><tr><td style="text-align:left;">InputNumber</td><td style="text-align:left;">数字输入框</td></tr><tr><td style="text-align:left;">TimePicker</td><td style="text-align:left;">时间选择器</td></tr><tr><td style="text-align:left;">TimeSelect</td><td style="text-align:left;">时间选择</td></tr><tr><td style="text-align:left;">Slider</td><td style="text-align:left;">滑块</td></tr><tr><td style="text-align:left;">Select</td><td style="text-align:left;">选择器</td></tr><tr><td style="text-align:left;">SelectOption</td><td style="text-align:left;">选择器选项</td></tr><tr><td style="text-align:left;">Radio</td><td style="text-align:left;">单选框</td></tr><tr><td style="text-align:left;">RadioGroup</td><td style="text-align:left;">单选框组</td></tr><tr><td style="text-align:left;">Switch</td><td style="text-align:left;">开关</td></tr><tr><td style="text-align:left;">Rate</td><td style="text-align:left;">评分</td></tr><tr><td style="text-align:left;">Divider</td><td style="text-align:left;">分割线</td></tr><tr><td style="text-align:left;">ApiSelect</td><td style="text-align:left;">远程下拉选择器</td></tr></tbody></table>`,20))])}}};export{B as default};
