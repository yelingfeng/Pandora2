import{d as v,r as s,c as h,o as P,F as x,e,w as n,b as B,f as i,j as _,a as N}from"./index-B0SowJ8y.js";import{u as b}from"./useForm-B5EttHiE.js";const I={class:"mb-4"},R=v({__name:"dynamic",setup(w){const c=[{field:"field1",component:"Input",label:"字段1",colProps:{span:8},show:({values:l})=>!!l.field5},{field:"field2",component:"Input",label:"字段2",colProps:{span:8},ifShow:({values:l})=>(console.log(l),!!l.field6)},{field:"field3",component:"DatePicker",label:"字段3",colProps:{span:8},dynamicDisabled:({values:l})=>!!l.field7},{field:"field4",component:"Select",label:"字段4",colProps:{span:8},dynamicRules:({values:l})=>l.field8?[{required:!0,message:"字段4必填"}]:[],componentProps:{options:[{label:"选项1",value:"1",key:"1"},{label:"选项2",value:"2",key:"2"}]}},{field:"field11",component:"DatePicker",label:"字段11",colProps:{span:8}},{field:"field5",component:"Switch",label:"是否显示字段1(css控制)",colProps:{span:8}},{field:"field6",component:"Switch",label:"是否显示字段2(dom控制)",colProps:{span:8}},{field:"field7",component:"Switch",label:"是否禁用字段3",colProps:{span:8}},{field:"field8",component:"Switch",label:"字段4是否必填",colProps:{span:8}}],m=[{field:"f1",component:"Input",label:"F1",colProps:{span:12},componentProps:({formModel:l})=>({placeholder:"同步f2的值为f1",onChange:o=>{l.f2=o.target.value}})},{field:"f2",component:"Input",label:"F2",colProps:{span:12},componentProps:{disabled:!0}},{field:"f3",component:"Input",label:"F3",colProps:{span:12},componentProps:({formActionType:l})=>({placeholder:"值改变时执行查询,查看控制台",onChange:async()=>{const{validate:o}=l,t=await o();console.log(t)}})}],[f,{updateSchema:a,appendSchemaByField:d,removeSchemaByFiled:F}]=b({labelWidth:180,schemas:c,actionColOptions:{span:24}}),[g]=b({labelWidth:180,schemas:m,actionColOptions:{span:24}});function S(){a({field:"field3",label:"字段3 New"})}function y(){a([{field:"field3",label:"字段3 New++"},{field:"field4",label:"字段4 New++"}])}function k(){d?.({field:"field10",label:"字段10",component:"Input",colProps:{span:8}},"field3")}function C(){F("field11")}return(l,o)=>{const t=s("el-button"),p=s("el-col"),r=s("el-row"),u=s("PdForm");return P(),h(x,null,[e(r,null,{default:n(()=>[e(p,{span:24},{default:n(()=>[B("div",I,[e(t,{onClick:S,class:"mr-2"},{default:n(()=>[...o[0]||(o[0]=[i(" 更改字段3label ",-1)])]),_:1}),e(t,{onClick:y,class:"mr-2"},{default:n(()=>[...o[1]||(o[1]=[i(" 同时更改字段3,4label ",-1)])]),_:1}),e(t,{onClick:k,class:"mr-2"},{default:n(()=>[...o[2]||(o[2]=[i(" 往字段3后面插入字段10 ",-1)])]),_:1}),e(t,{onClick:C,class:"mr-2"},{default:n(()=>[...o[3]||(o[3]=[i(" 删除字段11 ",-1)])]),_:1})])]),_:1})]),_:1}),e(r,null,{default:n(()=>[e(p,{span:24},{default:n(()=>[e(u,{onRegister:_(f)},null,8,["onRegister"])]),_:1})]),_:1}),e(r,null,{default:n(()=>[e(p,{span:24},{default:n(()=>[e(u,{onRegister:_(g)},null,8,["onRegister"])]),_:1})]),_:1})],64)}}}),V={class:"markdown-body"},O={__name:"dynamic",setup(w,{expose:c}){return c({frontmatter:{}}),(f,a)=>{const d=s("Preview");return P(),h("div",V,[a[0]||(a[0]=N("<h2>动态表单使用</h2><p>PdForm 支持在运行时对 schema 做增删改，典型场景：</p><ul><li>根据接口返回动态生成表单项</li><li>根据用户输入联动显示/隐藏/禁用某些字段</li><li>切换不同“表单模式”时快速替换部分字段</li></ul><p>常用方法：</p><ul><li><code>updateSchema(partial | partial[])</code>：按 field 更新已有 schema</li><li><code>resetSchema(partial | partial[])</code>：重置/覆盖 schema（用于大范围改动）</li><li><code>appendSchemaByField(schema, prefixField?, first?)</code>：在某个字段前/后插入</li><li><code>removeSchemaByFiled(field | field[])</code>：按 field 删除</li></ul>",5)),e(d,{"comp-name":"PdForm","demo-name":"dynamic"},{default:n(()=>[e(R)]),_:1})])}}};export{O as default};
